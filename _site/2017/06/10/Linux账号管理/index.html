<!DOCTYPE html>
<html>

  <head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Linux账号管理 - StormPhoenix的博客</title>

	<link rel="shortcut icon" href="/styles/images/favicon.jpg">
	<link rel="icon" href="/styles/images/favicon.jpg">

	<link rel="stylesheet" href="/styles/css/index.css">
	<link rel="stylesheet" href="/styles/css/fontawesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="/styles/css/syntax.css">
	<link rel="canonical" href="/2017/06/10/Linux%E8%B4%A6%E5%8F%B7%E7%AE%A1%E7%90%86/">
	<link rel="alternate" type="application/rss+xml" title="StormPhoenix的博客" href="/feed.xml">
	
	<meta name="keywords" content="Linux账号管理, StormPhoenix的博客, 王成;个人博客;学而不思则罔;思而不学则殆;生命不止;折腾不休">
	<meta name="description" content="王成;个人博客;学而不思则罔;思而不学则殆;生命不止;折腾不休">

	<script src="/styles/js/jquery.min.js"></script>
	<!--[if lt IE 9]>
    	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  	<![endif]-->
  	<script>
		var _hmt = _hmt || [];
		(function() {
		  var hm = document.createElement("script");
		  hm.src = "//hm.baidu.com/hm.js?94be4b0f9fc5d94cc0d0415ea6761ae9";
		  var s = document.getElementsByTagName("script")[0]; 
		  s.parentNode.insertBefore(hm, s);
		})();
	</script>
  	<style type="text/css">
	  	.docs-content{
	  		margin-bottom: 10px;
	  	}
  	</style>
</head>

  <body class="index">

    <header class="navbar navbar-inverse navbar-fixed-top docs-nav" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/" class="navbar-brand">
        <img src="/styles/images/logo.jpg">
      </a>
    </div>
    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">    
        <li>
          <a href="/">主页</a>
        </li>
        <li>
          <a href="/categories/">大类</a>
        </li>
        <li>
          <a href="/tag">小类</a>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
            <a><span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span></a>
        </li>
        <li>
          <a href="/donate/"><strong>打赏</strong></a>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">关于<b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a rel="nofollow" target="_blank" href="https://github.com/stormphoenix/">Github</a></li>
            <li><a rel="nofollow" target="_blank" href="http://github.com/stormphoenix/">关于作者</a></li>
            <li><a rel="nofollow" href="/books">我的书单</a></li>
			<!--            <li><a rel="nofollow" href="http://www.hifreud.com/domains/">域名管理</a></li> -->
            <li><a rel="nofollow" href="/reference">推荐博客</a></li>
            <li><a href="/feed.xml">RSS订阅</a></li>
            <li class="divider"></li>
            <li><a rel="nofollow" target="_blank" href="https://github.com/stormphoenix/stormphoenix.github.io/">本项目</a></li>
          </ul>
        </li>
      </ul>
    </nav>
  </div>
</header>

    <div class="docs-header" id="content">
  <div class="container">
  	
  		<!--
		    <h1>Linux账号管理</h1>
		    <p>Post on Jun 10, 2017 by <a href="/about">StormPhoenix</a></p>
		-->
		    <h1>为了生命中的美好，不妥协直到变老.</h1>
    
  </div>
</div>
    
      
<div class="banner">
  <div class="container">
  	
    	<a href="/categories/#Linux-ref">Linux</a>	/
    	<a href="/tag/#Linux-ref">Linux</a>
    
  </div>
</div>

    

    <div class="container docs-container">
  <div class="row">
    <div class="col-md-3">
      <div class="sidebar hidden-print" role="complementary">
        <div id="navigation">
  <h1>目录</h1>
  <ul class="nav sidenav">
<!--
    
      
      
      
      

      
        <li><a href="#year_2017">2017</a>
          <ul class="nav">
            <li><a href="#month_2017_June">June</a></li>
      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            </ul>
          </li>
      
    
-->
  </ul>
</div> 
      </div>
    </div>
    <div class="col-md-9" role="main">
      <div class="panel docs-content">
        <div class="wrapper">
            <header class="post-header">
              <h1 class="post-title">Linux账号管理</h1>
              <!--
                <p class="post-meta">Jun 10, 2017</p>
              -->
              <div class="meta">Posted on <span class="postdate">Jun 10, 2017</span> By <a target="_blank" href="http://stormphoenix.github.com">StormPhoenix</a></div>
              <br />
            </header>
            <article class="post-content">
              <ul id="markdown-toc">
  <li><a href="#uidgid" id="markdown-toc-uidgid"><strong>用户标识符UID与GID</strong></a></li>
  <li><a href="#section" id="markdown-toc-section"><strong>相关文件结构</strong></a></li>
  <li><a href="#section-1" id="markdown-toc-section-1"><strong>有效用户组和初始用户组</strong></a></li>
  <li><a href="#section-2" id="markdown-toc-section-2"><strong>账号管理</strong></a></li>
</ul>

<h2 id="uidgid"><strong>用户标识符UID与GID</strong></h2>
<ul>
  <li>uid：用户的的id，用一个数字标志。</li>
  <li>gid：用户所在组的id，用一个数值标志。</li>
</ul>

<h2 id="section"><strong>相关文件结构</strong></h2>

<ul>
  <li>/etc/passwd文件结构</li>
</ul>

<p>保存了系统中所有账号的信息，每一行都代表一个账号。账号的种类分为两个：<code>系统账号</code>和<code>用户账号</code>。其中系统账号是系统正常运行必须的。</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby">root:x:0:0:root:/root:/bin/bash</code></pre></figure>

<p>实例中的一行包括7列，用冒号“：”间隔分别说明：</p>

<pre><code>1. 账号名称 

2. 账号密码，为了账号的安全性，账号的密码被保存在了/etc/shadow文件中，所以此处的密码变成了x

3. UID

4. GID

5. 用户信息说明，无重要用途

6. 主文件夹

7. Shell用户登录系统后取得的默认的shell
</code></pre>

<ul>
  <li>/etc/shadow文件结构</li>
</ul>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby">root:$6$qE8d/k2K$NpCCL0kCsQdpAO5pC4QD91YAKpTS8w6.qdhl/fgZurM/2npI2bvEYY.LDNtll/Jnqlq1GH.AH3Z8hGiKJgIfy.:17111:0:99999:7:::</code></pre></figure>

<p>提前说明三个概念：</p>

<p><strong>密码过期</strong>：指超过了密码必须被修改的截止时间依然没有修改密码。在此情况下，用户依然可以使用此账号，但是账号登录的时候，系统会强制要求用户必须重新设置密码才能继续使用。</p>

<p><strong>密码失效</strong>：指的是密码过期超过了一定的天数，用户就无法使用此密码登录了。</p>

<p><strong>账号失效</strong>：账号无法使用了</p>

<p>实例中的一行包括9列：</p>

<pre><code>1.账号名称

2.账号密码，不过已经被加密过了。由于固定的编码系统产生的密码长度必须一致，所以这个字段的长度改变之后，密码就会失效

3.最近更改密码的日期，这个时间是以1970年1月1日为1而累加得到的

4.密码被修改后必须过几天才能再修改

5.密码被更改后必须在多少天内再被修改

6.在密码过期前的多少天之内提醒用户密码快到期了

7.密码过期后的宽限时间，如果超过了这个时间，会发生密码失效

8.账号在过了规定的日期就会无法使用，这个时间的设置同3

9.保留字段
</code></pre>

<ul>
  <li><strong>/etc/group文件结构</strong></li>
</ul>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby">root:x:0:root</code></pre></figure>

<p>实例中的一行包括4列：</p>

<pre><code>1.用户组名字

2.用户组密码，给用户组管理员使用

3.GID

4.用户组支持的用户
</code></pre>

<ul>
  <li><strong>/etc/gshadow文件结构</strong></li>
</ul>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby">root:x:0:root</code></pre></figure>

<p>实例中的一行包括4列：</p>

<pre><code>1.用户组名字。

2.密码列，同/etc/shadow。不过如果密码列上面是!的话，代表此用户组没有管理员。

3.用户组管理员账号。

4.用户组成员，成员之间用逗号分隔开
</code></pre>

<h2 id="section-1"><strong>有效用户组和初始用户组</strong></h2>

<ul>
  <li>
    <p>在/etc/passwd文件中，第四列就是用户的初始用户组组号GID，表示用户一登录系统就会取得该用户组的权限。而有效用户组是什么呢？当你登录shell，输入groups命令将会返回你所加入的所有用户组，其中第一个显示的用户组就是有效用户组。</p>
  </li>
  <li>
    <p>当用户新建一个文件的时候，文件所属的用户组是创建者当前的有效用户组。</p>
  </li>
  <li>
    <p>newgrp命令可以切换当前用户的有效用户组，不过这个命令将会重新启动一个shell。</p>
  </li>
</ul>

<h2 id="section-2"><strong>账号管理</strong></h2>

<ul>
  <li>useradd 添加一个用户</li>
  <li>passwd 修改用户的密码</li>
  <li>chage 修改密码的时间设置</li>
  <li>usermod 修改用户的信息</li>
  <li>finger 查看当前登录用户的详细信息</li>
  <li>chfn 修改个人信息</li>
  <li>id 查看用户的uid和gid</li>
  <li>groupadd 添加组</li>
  <li>groupmod 修改group的相关参数</li>
  <li>groupdel 删除用户组</li>
  <li>gpasswd 用户组管理员功能</li>
</ul>


            </article>
        </div>
      </div>
      <div class="panel docs-content">
        <article class="post-content">
          <div class="wrapper">
            


  <div id="disqus_thread"></div>
<script>

/**
  *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
  *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
   var disqus_config = function () {
   this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
   this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
   };
   */
(function() { // DON'T EDIT BELOW THIS LINE
 var d = document, s = d.createElement('script');
 s.src = 'https://stormphoenixde-bo-ke.disqus.com/embed.js';
 s.setAttribute('data-timestamp', +new Date());
 (d.head || d.body).appendChild(s);
 })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                                




 
          </div>
        </article>
      </div>
    </div>
  </div>
</div>

    
    <footer class="footer" role="contentinfo">
	<div class="container">
		<p class="copyright">Copyright &copy; 2014-2017 <a href="http://github.com/stormphoenix/"><code>StormPhoenix</code></a>.</p>
		<p>Powered by <a href="http://jekyllrb.com">Jekyll</a>, themed from <a href="http://lesscss.cn/">Less</a>, refactored by <a href="http://www.hifreud.com/">StormPhoenix</a></p>
	</div>
</footer>

<script src="/styles/js/jquery.min.js"></script>
<script src="/styles/js/bootstrap.min.js"></script>
<script src="/styles/js/holder.min.js"></script>
<script src="/styles/js/lessismore.js"></script>
<script src="/styles/js/application.js"></script>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


  </body>
</html>
